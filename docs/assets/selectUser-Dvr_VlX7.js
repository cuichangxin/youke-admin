import{g as Q,a as i,r as h,f as o,o as z,j as A,w as t,b as D,d as e,i as d,K as x,t as F,L as H,e as O,M as P}from"./index-CIpmHOGK.js";const W={class:"dialog-footer"},$=H({name:"SelectUser"}),G=Object.assign($,{props:{roleId:{type:[Number,String]}},emits:["ok"],setup(N,{expose:w,emit:k}){const V=N;Q();const f=i(null),_=i([]),u=i(!1),C=i(0),b=i([]),l=h({pageNum:1,pageSize:10,roleId:void 0,userName:void 0,phoneNumber:void 0}),I=h({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1});function S(){l.roleId=V.roleId,y(),u.value=!0}function U(s){b.value=s}function y(){O("/system/role/authUser/unallocatedList",l).then(s=>{_.value=s.rows,C.value=s.total})}function c(){l.pageNum=1,y()}function q(){f.value.resetFields(),c()}const K=k;function L(){if(l.roleId,b.value.join(",")==""){P.error("请选择要分配的用户");return}u.value=!1,K("ok")}return w({show:S}),(s,n)=>{const v=o("a-input"),p=o("a-form-item"),m=o("a-button"),g=o("a-space"),j=o("a-form"),r=o("a-table-column"),B=o("a-tag"),R=o("a-table"),T=o("a-modal");return z(),A(T,{visible:u.value,"onUpdate:visible":n[3]||(n[3]=a=>u.value=a),title:"选择用户",width:"800px"},{footer:t(()=>[D("div",W,[e(g,null,{default:t(()=>[e(m,{onClick:n[2]||(n[2]=a=>u.value=!1)},{default:t(()=>[d("取 消")]),_:1}),e(m,{type:"primary",onClick:L},{default:t(()=>[d("确 定")]),_:1})]),_:1})])]),default:t(()=>[e(j,{ref_key:"queryRef",ref:f,model:l,layout:"inline"},{default:t(()=>[e(p,{label:"用户名称",field:"userName"},{default:t(()=>[e(v,{modelValue:l.userName,"onUpdate:modelValue":n[0]||(n[0]=a=>l.userName=a),placeholder:"请输入用户名称",clearable:"",style:{width:"200px"},onKeyup:x(c,["enter"])},null,8,["modelValue"])]),_:1}),e(p,{label:"手机号码",field:"phoneNumber"},{default:t(()=>[e(v,{modelValue:l.phoneNumber,"onUpdate:modelValue":n[1]||(n[1]=a=>l.phoneNumber=a),placeholder:"请输入手机号码","allow-clear":"",style:{width:"200px"},onKeyup:x(c,["enter"])},null,8,["modelValue"])]),_:1}),e(p,null,{default:t(()=>[e(g,null,{default:t(()=>[e(m,{type:"primary",onClick:c},{default:t(()=>[d("搜索")]),_:1}),e(m,{type:"outline",onClick:q},{default:t(()=>[d("重置")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"]),e(R,{ref:"refTable","row-key":"userId",data:_.value,bordered:!1,"row-selection":I,scroll:{x:0,y:"120%",minWidth:0,maxHeight:"260px"},onSelect:U},{columns:t(()=>[e(r,{title:"用户名称","data-index":"userName"}),e(r,{title:"用户昵称","data-index":"nickName"}),e(r,{title:"手机","data-index":"phoneNumber",ellipsis:"",tooltip:""}),e(r,{title:"状态",align:"center","data-index":"status"},{cell:t(({record:a})=>[e(B,{modelValue:a.status,"onUpdate:modelValue":M=>a.status=M,color:a.status==="0"?"#168cff":"#f53f3f"},{default:t(()=>[d(F(a.status==="0"?"正常":"停用"),1)]),_:2},1032,["modelValue","onUpdate:modelValue","color"])]),_:1}),e(r,{title:"创建时间",align:"center","data-index":"createTime"})]),_:1},8,["data","row-selection"])]),_:1},8,["visible"])}}});export{G as default};
