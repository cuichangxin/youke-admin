import H from"./selectUser-Dvr_VlX7.js";import{f as o,o as k,j as S,w as t,d as e,c as O,F as Q,B as W,i as s,t as j,h as X,_ as Y,l as Z,k as K,g as L,a as m,r as $,n as ee,b as A,y as te,e as oe}from"./index-CIpmHOGK.js";const ne={__name:"index",props:{columns:{type:[Object,Array]}},emits:["refreshTable"],setup(v,{emit:w}){const p=v,I=w,y=()=>{I("refreshTable")},B=(f,x)=>{p.columns.filter(a=>a.title===x)[0].visible=f};return(f,x)=>{const a=o("Icon"),r=o("a-button"),i=o("a-tooltip"),V=o("a-checkbox"),C=o("a-doption"),h=o("a-dropdown"),g=o("a-space");return k(),S(g,null,{default:t(()=>[e(i,{content:"刷新"},{default:t(()=>[e(r,{shape:"circle",onClick:y},{icon:t(()=>[e(a,{icon:"refresh"})]),_:1})]),_:1}),v.columns?(k(),S(i,{key:0,content:"显隐列"},{default:t(()=>[e(h,{"hide-on-select":!1},{content:t(()=>[(k(!0),O(Q,null,W(v.columns,c=>(k(),S(C,{key:c.title},{default:t(()=>[e(V,{modelValue:c.visible,"onUpdate:modelValue":b=>c.visible=b,onChange:b=>B(b,c.title)},{default:t(()=>[s(j(c.title),1)]),_:2},1032,["modelValue","onUpdate:modelValue","onChange"])]),_:2},1024))),128))]),default:t(()=>[e(r,{shape:"circle"},{icon:t(()=>[e(a,{icon:"application-two"})]),_:1})]),_:1})]),_:1})):X("",!0)]),_:1})}}},ae={class:"role_search"},le={class:"role_content"},se={class:"role_content_header"},ce={__name:"authUser",setup(v){const w=Z(),p=K(),{proxy:I}=L(),{$modal:y,$message:B}=L().appContext.config.globalProperties,f=m(null),x=$({type:"checkbox",showCheckedAll:!0,onlyCurrent:!1}),a=$({userName:"",phoneNumber:""}),r=m(!0),i=m(!1),V=m([]);m([]);const C=m([]),h=$({total:0,pageNum:1,pageSize:10,roleId:p.params.roleId,userName:void 0,phonenumber:void 0,showTotal:!0,showJumper:!0,showPageSize:!0}),g=()=>{i.value=!0,oe("/system/role/authUser/allocatedList",h).then(l=>{h.total=l.total,V.value=l.rows,i.value=!1})},c=()=>{},b=()=>{f.value.resetFields()},z=()=>{w.go(-1)},P=l=>{y.confirm({title:"系统提示",content:`确认要取消该用户"${l.userName}"角色吗?`,titleAlign:"start",onOk:()=>{}})},q=l=>{C.value=l,l.length>0?r.value=!1:r.value=!0},D=()=>{I.$refs.selectRef.show()},E=()=>{p.params.roleId,C.value.join(","),y.confirm({title:"系统提示",content:"是否取消选中用户授权数据项?",titleAlign:"start",onOk:()=>{}})};return ee(()=>{g()}),(l,u)=>{const T=o("a-input"),N=o("a-form-item"),d=o("a-button"),U=o("a-space"),J=o("a-form"),R=o("Icon"),_=o("a-table-column"),M=o("a-tag"),G=o("a-table");return k(),O("div",null,[A("div",ae,[e(U,null,{default:t(()=>[e(J,{ref_key:"formRef",ref:f,model:a,layout:"inline",onSubmit:c},{default:t(()=>[e(N,{field:"roleId",label:"用户名称"},{default:t(()=>[e(T,{modelValue:a.roleId,"onUpdate:modelValue":u[0]||(u[0]=n=>a.roleId=n)},null,8,["modelValue"])]),_:1}),e(N,{field:"roleName",label:"手机号码"},{default:t(()=>[e(T,{modelValue:a.roleName,"onUpdate:modelValue":u[1]||(u[1]=n=>a.roleName=n)},null,8,["modelValue"])]),_:1}),e(N,null,{default:t(()=>[e(U,null,{default:t(()=>[e(d,{type:"primary","html-type":"search"},{default:t(()=>[s("搜索")]),_:1}),e(d,{type:"outline",onClick:b},{default:t(()=>[s("重置")]),_:1})]),_:1})]),_:1})]),_:1},8,["model"])]),_:1})]),A("div",le,[A("div",se,[e(U,null,{default:t(()=>[e(d,{type:"primary",onClick:D},{icon:t(()=>[e(R,{icon:"plus"})]),default:t(()=>[s("添加用户")]),_:1}),e(d,{type:"primary",status:"danger",disabled:r.value,onClick:E},{icon:t(()=>[e(R,{icon:"delete"})]),default:t(()=>[s("批量取消授权")]),_:1},8,["disabled"]),e(d,{type:"primary",status:"warning",onClick:z},{icon:t(()=>[e(R,{icon:"close"})]),default:t(()=>[s("关闭")]),_:1})]),_:1}),e(ne,{onRefreshTable:u[2]||(u[2]=n=>g())})]),e(G,{class:"role_table",bordered:!1,"row-key":"userId",loading:i.value,pagination:h,"row-selection":x,data:V.value,onSelect:q},{columns:t(()=>[e(_,{title:"用户名称","data-index":"userName",align:"center"}),e(_,{title:"用户昵称","data-index":"nickName",align:"center"}),e(_,{title:"手机","data-index":"phoneNumber",align:"center"}),e(_,{title:"状态","data-index":"status",align:"center"},{cell:t(({record:n})=>[e(M,{modelValue:n.status,"onUpdate:modelValue":F=>n.status=F,color:n.status==="0"?"#168cff":"#f53f3f"},{default:t(()=>[s(j(n.status==="0"?"正常":"停用"),1)]),_:2},1032,["modelValue","onUpdate:modelValue","color"])]),_:1}),e(_,{title:"创建时间","data-index":"createTime",align:"center"}),e(_,{title:"操作",width:240,align:"center"},{cell:t(({record:n})=>[e(d,{type:"text",size:"mini",onClick:F=>P(n)},{default:t(()=>[s("取消授权")]),_:2},1032,["onClick"])]),_:1})]),_:1},8,["loading","pagination","row-selection","data"])]),e(H,{ref:"selectRef","role-id":te(p).params.roleId,onOk:g},null,8,["role-id"])])}}},ue=Y(ce,[["__scopeId","data-v-8dee064c"]]);export{ue as default};
