import{_ as N,g as S,u as B,r as q,a as D,o as g,c as v,b as U,d as e,w as t,e as V,f as r,h as w,i as c,t as n,j as P}from"./index-CY8aBt-l.js";import A from"./information-DfRlX2sU.js";import E from"./password-DbV9vqfB.js";const L={class:"user-center"},R={class:"my-card"},T=["src"],j={__name:"index",setup(z){const{proxy:k}=S(),x={uid:"-2",name:"avatar.png",url:B().avatar},a=q({user:{},roleGroup:void 0,postGroup:{}}),i=D([x]),G=(l,u)=>{i.value=[u]},I=l=>{const u=new AbortController;return async function(){const{onProgress:p,onError:m,onSuccess:s,fileItem:f,name:_="file"}=l;p(20);const d=new FormData;d.append(_,f.file);const b=o=>{let y;o.total>0&&(y=o.loaded/o.total*100),p(parseInt(String(y),10),o)};try{const o=await k.$http.userUploadApi(d,{controller:u,onUploadProgress:b});s(o)}catch(o){m(o)}}(),{abort(){u.abort()}}};function C(){V("/system/user/profile").then(l=>{a.user=l.data,a.roleGroup=l.roleGroup,a.postGroup=l.postGroup})}return C(),(l,u)=>{const h=r("Icon"),p=r("a-avatar"),m=r("a-upload"),s=r("a-descriptions-item"),f=r("a-descriptions"),_=r("a-tab-pane"),d=r("a-tabs"),b=r("a-col"),o=r("a-row");return g(),v("div",L,[U("div",R,[e(m,{"custom-request":I,"list-type":"picture-card","file-list":i.value,"show-upload-button":!0,"show-file-list":!1,onChange:G},{"upload-button":t(()=>[e(p,{size:90,class:"info-avatar"},{"trigger-icon":t(()=>[e(h,{icon:"camera"})]),default:t(()=>[i.value.length?(g(),v("img",{key:0,src:i.value[0].url},null,8,T)):w("",!0)]),_:1})]),_:1},8,["file-list"]),e(f,{class:"descriptions",column:1,"label-style":{color:"rgb(var(--gray-8))"}},{default:t(()=>[e(s,{label:"用户昵称"},{default:t(()=>[c(n(a.user.nickName),1)]),_:1}),e(s,{label:"用户名称"},{default:t(()=>[c(n(a.user.userName),1)]),_:1}),e(s,{label:"手机号码"},{default:t(()=>[c(n(a.user.phonenumber),1)]),_:1}),e(s,{label:"用户邮箱"},{default:t(()=>[c(n(a.user.email),1)]),_:1}),a.user.dept?(g(),P(s,{key:0,label:"所属部门"},{default:t(()=>[c(n(a.user.dept.deptName)+" / "+n(a.postGroup),1)]),_:1})):w("",!0),e(s,{label:"所属角色"},{default:t(()=>[c(n(a.roleGroup),1)]),_:1}),e(s,{label:"注册时间"},{default:t(()=>[c(n(a.user.createTime),1)]),_:1})]),_:1},8,["label-style"])]),e(o,{class:"wrapper"},{default:t(()=>[e(b,null,{default:t(()=>[e(d,{"default-active-key":"1"},{default:t(()=>[e(_,{key:"1",title:"基础信息"},{default:t(()=>[e(A,{user:a.user},null,8,["user"])]),_:1}),e(_,{key:"2",title:"修改密码"},{default:t(()=>[e(E)]),_:1})]),_:1})]),_:1})]),_:1})])}}},J=N(j,[["__scopeId","data-v-630cd67b"]]);export{J as default};
